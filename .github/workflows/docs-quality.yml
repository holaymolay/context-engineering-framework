name: Docs quality

on:
  push:
    paths:
      - "**/*.md"
  pull_request:
    paths:
      - "**/*.md"

jobs:
  docs-quality:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with:
          node-version: "20"
      - name: Install markdownlint
        run: npm install -g markdownlint-cli
      - name: Install Vale
        run: |
          VALE_VERSION=2.28.0
          curl -sL "https://github.com/errata-ai/vale/releases/download/v${VALE_VERSION}/vale_${VALE_VERSION}_Linux_64-bit.tar.gz" -o vale.tar.gz
          tar -xzf vale.tar.gz vale
          echo "$PWD" >> $GITHUB_PATH
      - name: Run docs quality checks
        run: python scripts/check-docs-quality.py
